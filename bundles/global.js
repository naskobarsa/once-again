function alignMenu(){var i;if($(window).innerWidth()>767){var t=0,r=$("#horizontal").width()-100,u=-1,n="";jQuery.each($("#horizontal").children(),function(){u++;t+=$(this).outerWidth(!0);r<t&&(n+=$("<div>").append($(this).clone()).html(),$(this).remove())});i=$.cookie("language")==="en"?"More":"Още";$("#horizontal").append('<li href="#" class="hide-show"><a href="#" class="nav-bar-item">'+i+'<i class="fa fa-caret-down"><\/i><\/a><ul>'+n+"<\/ul><\/li>");$(window).innerWidth()>992?$("#horizontal li.hide-show").click(function(){$(this).children("ul").toggle()}):$("#horizontal li.hide-show").click(function(){$(this).children("ul").toggle()});n==""?$("#horizontal li.hide-show").hide():$("#horizontal li.hide-show").show()}}function goToSelection(n){$("html, body").animate({scrollTop:$(n).offset().top},0)}var mobile,sulsControls,setBlocksAlignment,Suls,App;$(function(){var i,r;$(".k-widget").removeClass("input-validation-error");var n=$("#header-nav"),u=$(".header-wrapper"),t=n.find(".toggle-nav"),f=n.find(".toggle-holder");$(document).on("click",function(n){$(n.target).hasClass("nav-link")&&$(n.target).hasClass("profile-btn")||$(n.target).parents(".dropdown-items").length!=0||$(n.target).hasClass("dropdown-items")||$(".custom-dropdown").hide()});$("#header-search-item").hover(function(){var n=$(this).find("#Query")[0];$(n).focus()});n.find(".dropdown-item").click(function(){$(window).innerWidth()<992&&($(this).hasClass("dropdown-active")?($(this).find(".icon-btn").hasClass("icon-btn-active")&&(n.find(".icon-btn").removeClass("icon-btn-active"),t.stop(!0,!0).slideUp()),$(this).removeClass("dropdown-active")):(n.find(".dropdown-item").removeClass("nav-item-active dropdown-active"),$(this).addClass("nav-item-active dropdown-active"),$(this).hasClass("btn-item")&&(n.find(".icon-btn").removeClass("icon-btn-active"),$(this).find(".icon-btn").addClass("icon-btn-active"),u.addClass("mobile-pad"),$(this).hasClass("nav-toggle-item")?(t.addClass("toggle-active"),t.stop(!0,!0).slideDown()):t.css("display","none"))))});$(".custom-dropdown:not(.profile-menu-bar)").click(function(n){n.stopPropagation()});$(".profile-menu-bar .profile-bar-menu-item").click(function(n){n.stopPropagation()});$(document).click(function(){$(window).innerWidth()<992&&(n.find(".dropdown-item").removeClass("dropdown-active"),n.find(".icon-btn").removeClass("icon-btn-active"),f.stop(!0,!0).slideUp())});$("#lang-switch").kendoMobileSwitch({onLabel:"",offLabel:"",checked:$.cookie("language")==="en",change:function(){$.cookie("language",this.value()?"en":"bg",{expires:7,path:"/"});window.location.reload()}});$(".lang-switch-label").click(function(){var t=$(this).data("langId"),n=$("#lang-switch").data("kendoMobileSwitch");t==="en"?(n.value(!0),n.trigger("change")):(n.value(!1),n.trigger("change"))});kendo.culture("en-GB");jQuery.validator.methods.date=function(){return!0};$(".scroll-holder").length&&$(".scroll-holder").each(function(){var n=new PerfectScrollbar($(this)[0]);$(this).hover(function(){n.update()})});$("#search-form").submit(function(){var n=$("#search-input"),t;return n.val().trim().length>2?!0:(t=n.popover({trigger:"manual",placement:"bottom"}).popover("show"),setTimeout(function(){t.popover("hide")},2e3),!1)});i=$(".tags-wrapper").find(".sidebar-title");i.click(function(){mobile&&($(this).parent().find(".list-tags").slideUp("fast",function(){$(this).stop(!0,!0);i.find(".fa-caret-up").removeClass("fa-caret-up").addClass("fa-caret-down")}),$(this).parent().find(".list-tags").slideDown("fast",function(){$(this).stop(!0,!0);i.find(".fa-caret-down").removeClass("fa-caret-down").addClass("fa-caret-up")}))});r=$(".category-wrapper").find(".sidebar-title");r.click(function(){mobile&&($(this).parent().find(".list-categories").slideUp("fast",function(){$(this).stop(!0,!0);r.find(".fa-caret-up").removeClass("fa-caret-up").addClass("fa-caret-down")}),$(this).parent().find(".list-categories").slideDown("fast",function(){$(this).stop(!0,!0);r.find(".fa-caret-down").removeClass("fa-caret-down").addClass("fa-caret-up")}))});alignMenu();$(function(){$(".main-profile-menu-item").each(function(){var n=$(this),t=$(this).next("ul");t.on("show.bs.collapse",function(){n.removeClass("arrow-down");n.addClass("arrow-up")});t.on("hide.bs.collapse",function(){n.removeClass("arrow-up");n.addClass("arrow-down")})})});$(window).bind("resize load",function(){$(this).width()<=992&&($(".profile-nav-list-item .main-profile-menu-item").removeClass("arrow-up").addClass("arrow-down"),$(".profile-nav-list-item .sub-menu").removeClass("collapsed in").addClass("collapse"))});$("#show-profile-menu").on("click",function(n){n.preventDefault();var t=$("#page-header .profile-menu-bar");$(".custom-dropdown").not(t).fadeOut();t.find(".profile-header").hide();t.toggle()});$(".header-dropdown-link").on("click",function(n){n.preventDefault();var i=$(this).parent(),t=i.find(".custom-dropdown");$(".custom-dropdown").not(t).fadeOut();t.fadeToggle()})});mobile=$(window).innerWidth()<992?!0:!1;$(window).resize(function(){$("#horizontal").append($("#horizontal li.hide-show ul").html());$("#horizontal li.hide-show").remove();$(window).innerWidth()<992?mobile||($(".sidebar-nav").slideUp(),$(".m-hide").slideUp(),mobile=!0):mobile&&($(".sidebar-nav").slideDown(),$(".m-hide").slideDown(),mobile=!1);alignMenu()});sulsControls=sulsControls||{};sulsControls.KendoButtonFuctions=function(){function n(n,t){t=typeof t!="undefined"?t:"DataGrid";var r=$("#"+t).data("kendoGrid"),u=new kendo.data.transports["aspnetmvc-server"]({prefix:""}).options.parameterMap({page:r.dataSource.page(),sort:r.dataSource.sort(),filter:r.dataSource.filter()}),f=$("#"+n),i=f.attr("href");i=i.replace(/page=([^&]*)/,"page="+(u.page||"~"));i=i.replace(/sort=([^&]*)/,"sort="+(u.sort||"~"));i=i.replace(/pageSize=([^&]*)/,"pageSize="+r.dataSource.pageSize());i=i.replace(/filter=([^&]*)/,"filter="+(u.filter||"~"));f.attr("href",i)}function t(t){t=typeof t!="undefined"?t:"DataGrid";n("export",t);$("#export span").addClass("glyphicon glyphicon-download")}return{createExportToExcelButton:t,createKendoSubmitParamsButton:n}}();sulsControls.Validation=function(){function n(n,t,i){var r=kendo.template($("#validationMessageTemplateForPopUpEditing").html());n.find('[data-valmsg-for="'+t+'"],[data-val-msg-for="'+t+'"]').replaceWith(r({field:t,message:i[0]}))}function t(t){var i,e,r,u,o,s,f,h;if(t.errors&&($(".k-grid").each(function(){return e=$(this).data("kendoGrid"),e.dataSource===t.sender?(i=e,!1):void 0}),i)){r=t.errors;for(u in r)if(u=="alert"||u==""){for(o="Грешки:",s=r[u].errors,f=0,h=s.length;f<h;f++)o+="\n"+s[f];alert(o);this.cancelChanges()}i.one("dataBinding",function(u){u.preventDefault();for(var f in t.errors)n(i.editable.element,f,r[f].errors)})}}function i(n){n=n||window.event;var t="Промените няма да бъдат запазени. Продължаване?";return n&&(n.returnValue=t),t}function r(n){document.getElementById(n).reset()}function u(n){$("#"+n).closest(".k-widget").removeClass("input-validation-error")}return{displayAllValidationMessagesForGrid:t,removeValidationClassAfterServerValidation:u,showValidationMessageTemplateForPopUpEditing:n,getBackNavigationWarring:i,resetFormValues:r}}();sulsControls.GridClientTemplates=function(){function i(n){return n===!0?'<span class="label label-success">Да<\/span>':n===!1?'<span class="label label-default">Не<\/span>':'<span class="label label-default">Неизвестен<\/span>'}function r(n,t,i){return i?n?'&lt;a href="'+n+'" target="_blank"&gt;'+(t||n)+"&lt;/a&gt;":"":n?'<a href="'+n+'" target="_blank">'+(t||n)+"<\/a>":""}function u(n,t,i){return i?n?'&lt;a href="/courses'+n+'" target="_blank"&gt;/courses'+(t||n)+"&lt;/a&gt;":"":n?'<a href="/courses'+n+'" target="_blank">/courses'+(t||n)+"<\/a>":""}function f(n){return n==0?'<h3><span class="label label-danger">Необработено<\/span><\/h3>':n==1?'<h3><span class="label label-warning">Изчакващо<\/span><\/h3>':n==2?'<h3><span class="label label-success">Обработено<\/span><\/h3>':"Неизвестен"}function e(n,t,i){return n==1?'<h4><span class="label label-default">Непотвърдено<\/span><\/h4>':n==2?t=="EasyPay"?'<h4><a href="/users/payments/confirmedeasypaypayment/'+i+'" target="_blank" class="payment-grid-button"><span class="label label-warning">Изчакващо<\/span><\/a><\/h4>':'<h4><span class="label label-warning">Изчакващо<\/span><\/h4>':n==3?'<h4><span class="label label-info">Потвърдено<\/span><\/h4>':n==4?'<h4><span class="label label-success">Успешно<\/span><\/h4>':n==5?'<h4><span class="label label-danger">Отхвърлено<\/span><\/h4>':n==6?'<h4><span class="label label-danger">Изтекло<\/span><\/h4>':"Неизвестен"}function o(n){return n==1?'<h4><span class="label label-default">Необработено<\/span><\/h4>':n==2?'<h4><span class="label label-warning">Изчакващо<\/span><\/h4>':n==3?'<h4><span class="label label-success">Успешно<\/span><\/h4>':n==4?'<h4><span class="label label-danger">Отхвърлено<\/span><\/h4>':n==5?'<h4><span class="label label-danger">Изтекло<\/span><\/h4>':"Неизвестен"}function s(n){return n?'<span class="label label-success">Изпратени<\/span>':'<span class="label label-warning">Неизпратени<\/span>'}function h(n){return n?'<a href="/users/profile/show/'+n+'">'+n+"<\/a>":""}function c(n,i){var r="";return n&&(r+=w(n),i&&(r+=" "+t(n))),r}function l(n){var i="";return n&&(i=t(n)),i}function n(n,t){if(n.hasClass("k-grid")){var i=n.find("table colgroup > col").length;n.find("table tbody").append('<tr class="kendo-data-row"><td colspan="'+i+'" style="text-align:center">'+t+"<\/td><\/tr>")}else n.append('<div class="top-buffer left-buffer right-buffer bottom-buffer text-center clearfix">'+t+"<\/div>")}function a(t,i){t.dataSource.data().length===0&&n(t.element,i)}function v(n,t){return'<a class="k-button k-button-icontext" href="/forum/'+n+"/"+t+'">Въпрос<\/a>'}function y(n,t,i){return'<a class="k-button k-button-icontext" href="/trainings/'+n+"/"+t+'">'+i+"<\/a>"}function p(n,t,i){return t=t||"Активен",i=i||"Неактивен",'<span class="label label-'+(n?"success":"default")+'">'+(n?t:i)+"<\/span>"}function w(n){var t=n.getDate(),i=n.getMonth()+1,u=n.getFullYear(),r=t>0&&t<10?"0"+t:t;return r+="/",r+=i>0&&i<10?"0"+i:i,r+="/",r+u}function t(n){var t=n.getHours(),i=n.getMinutes(),r=t>=0&&t<10?"0"+t:t;return r+=":",r+(i>=0&&i<10?"0"+i:i)}return{getYesNoStateTemplate:i,getEntryProcesedStateTemplate:f,getSendMailsStateTemplate:s,getPaymentStatusTemplate:e,getApplicationStatusTemplate:o,getUserProfileLinkTemplate:h,getLinkTemplate:r,getCourseLinkTemplate:u,getDateTimeFormat:c,getTimeFormat:l,getForumQuestionLinkTemplate:v,getTrainingLinkTemplate:y,getIsActiveState:p,displayGridNoResultsMessage:n,displayNoResultsMessageIfNecessary:a}}();sulsControls.ReferralsControls=function(){function t(){var t=n.ref;t&&$.cookie("ref",t)}var n=function(n){var r,t,i;if(n=="")return{};for(r={},t=0;t<n.length;++t)(i=n[t].split("="),i.length==2)&&(r[i[0]]=decodeURIComponent(i[1].replace(/\+/g," ")));return r}(window.location.search.substr(1).split("&"));return{checkForReferral:t}}();sulsControls.Editors=function(){function i(n,t){n||(n="textarea");$(n).kendoEditor({tools:["bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","insertImage","insertFile","subscript","superscript","createTable","addRowAbove","addRowBelow","addColumnLeft","addColumnRight","deleteRow","deleteColumn",t?"viewHtml":"","formatting","cleanFormatting","fontName","fontSize","foreColor","backColor","print"]})}var n={init:function(n,t){var i="autosave anchor autolink emoticons wordcount table textcolor searchreplace paste lists image hr charmap autolink advlist link preview",r="undo redo | bold italic underline | alignleft aligncenter alignright alignjustify | emoticons | table bullist numlist | forecolor backcolor | link | preview";n&&(i+=" code",r+=" code");tinymce.init({plugins:i,toolbar:r,height:300,content_css:"/Scripts/tinymce/skins/custom_content.min.css",relative_urls:!1,remove_linebreaks:!1,setup:function(n){n.on("init",function(n){t&&tinymce.execCommand("mceFocus",!1,n.target.id)})}})},loadEditor:function(n){n[0]==="#"&&(n=n.substr(1));tinymce.execCommand("mceAddEditor",!0,n)},unloadEditor:function(n){n[0]==="#"&&(n=n.substr(1));tinymce.execCommand("mceRemoveEditor",!0,n)}},t={loadCKEditor:function(n,t){CKEDITOR.replace(n,{startupFocus:!0,toolbarGroups:[{name:"document",groups:["mode","document"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"insert",groups:["Image","Table","HorizontalRule","Smiley"]},{name:"colors",groups:["TextColor","BGColor"]},{name:"links"},{name:"tools",groups:["Maximize","ShowBlocks"]},{name:"styles",groups:["Styles","Format","Font","FontSize"]}]});CKEDITOR.config.extraPlugins="a11yhelp,about,codesnippet,colorbutton,font,justify,lineutils,liststyle,magicline,panelbutton,pastefromword,preview,resize,showblocks,smiley,specialchar,table,tabletools,templates,widget,wsc";CKEDITOR.config.height=t},unloadCKEditor:function(n){CKEDITOR.remove(n)},checkForUnsavedText:function(n){document.body.onbeforeunload=function(){for(editorName in CKEDITOR.instances)if(CKEDITOR.instances[editorName].checkDirty())return n}},resetCKEditor:function(n){$.each(n,function(n,t){var i=t.id.split("_")[1];CKEDITOR.instances[i].resetDirty()})}};return{tinyMce:n,ckeditor:t,initKendoEditor:i}}();sulsControls.ImageHelpers=function(){function n(n,t,i,r){var f=n.width(),e=n.height(),u;f>t&&(u=t/f,n.css("width",t),n.css("height",e*u),e=e*u,f=f*u);e>r&&(u=r/e,n.css("height",r),n.css("width",f*u))}return{scaleImage:n}}();sulsControls.NumberHelpers=function(){var n=function(n,t,i,r){var f=n,t=isNaN(t=Math.abs(t))?2:t,i=i==undefined?".":i,r=r==undefined?",":r,o=f<0?"-":"",e=parseInt(f=Math.abs(+f||0).toFixed(t))+"",u=(u=e.length)>3?u%3:0;return o+(u?e.substr(0,u)+r:"")+e.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+r)+(t?i+Math.abs(f-e).toFixed(t).slice(2):"")},t=function(n,t){var i=parseInt(1+new Array(t+1).join("0"));return(Math.round(n*i)/i).toFixed(t)},i=function(n,t){return n=n.toString(),n=n.slice(0,n.indexOf(".")+1+t),Number(n)};return{roundNumber:t,formatMoney:n,truncateNumber:i}}();setBlocksAlignment=function(n,t){var r=$(n),i=r.find(t),u=function(){var n,t,e,u,f;if(i.css("height","auto"),n=Math.floor(r.width()/i.width()),n==null||n<2)return!0;for(t=0,e=i.length;t<e;t+=n)u=0,f=i.slice(t,t+n),f.each(function(){var n=parseInt($(this).outerHeight());n>u&&(u=n)}),f.css("height",u)};u();$(window).on("resize",u)};Suls=Suls||{};Suls.SystemMessages=function(){var n=function(){var n=$(this).data("id");$("#"+n).fadeOut(500,function(){var n=$(".dismissable:visible");n.length===0&&$(".hide-system-messages").fadeOut(500)})},t=function(n){alert(JSON.parse(n.responseText).Message||"Възникна неочаквана грешка. Моля, опитайте по-късно.")},i=function(){var n=$(".dismissable"),t=$(".hide-system-messages");n.fadeOut(500);t.fadeOut(500)};return{hide:n,hideAll:i,onDismissionFailure:t}}();Suls=Suls||{};Suls.NotificationsHub=function(){function n(n,t){$(".notification-count .table-holder").html('<span class="circle-cell">'+t+"<\/span>")}var t=function(){var t=$.connection.notificationsHub;t.client.sendNotification=function(){$("#notifications").popover("show");setTimeout(function(){$("#notifications").popover("hide");$("#notifications").popover("disable")},2e3)};t.client.showLastNotifications=function(t,i){n(t,i)};t.client.refreshNotifications=function(t,i){n(t,i)};$.connection.hub.start()};return{initialize:t}}();App=App||{};App.KendoGridValidation=function(){function n(n,t,i){var r=kendo.template($("#validationMessageTemplateForPopUpEditing").html());n.find('[data-valmsg-for="'+t+'"],[data-val-msg-for="'+t+'"]').replaceWith(r({field:t,message:i[0]}))}function t(t){var i,e,r,u,o,s,f,h;if(t.errors&&($(".k-grid").each(function(){return e=$(this).data("kendoGrid"),e.dataSource===t.sender?(i=e,!1):void 0}),i)){r=t.errors;for(u in r)if(u=="alert"||u==""){for(o="Грешки:",s=r[u].errors,f=0,h=s.length;f<h;f++)o+="\n"+s[f];alert(o)}i.one("dataBinding",function(u){u.preventDefault();for(var f in t.errors)n(i.editable.element,f,r[f].errors)})}}function i(n){n=n||window.event;var t="Промените няма да бъдат запазени. Продължаване?";return n&&(n.returnValue=t),t}function r(n){document.getElementById(n).reset()}function u(n){$("#"+n).closest(".k-widget").removeClass("input-validation-error")}return{displayAllValidationMessagesForGrid:t,removeValidationClassAfterServerValidation:u,showValidationMessageTemplateForPopUpEditing:n,getBackNavigationWarring:i,resetFormValues:r}}();App=App||{};App.KendoModalHelper=function(){function u(u){var f,e;i[u.type]&&(f=$(n),f.length>0&&(e=$(r),f.hide(),e.prepend(t)))}function f(r){if(i[r.type]){var u=$(n);u.length>0&&(t.remove(),u.show())}}var r=".k-edit-buttons",n=".k-primary",t=$('<button disabled class="k-button k-button-icontext k-primary k-grid-update"><i class="fa fa-spinner fa-pulse fa-3x fa-fw" style="font-size: 100%;"><\/i>Запазване<\/button>'),i={create:"create",update:"update"};return{showLoadingButton:u,hideLoadingButton:f}}();App=App||{};App.QueryString=function(){for(var n,u,t={},f=window.location.search.substring(1),r=f.split("&"),i=0;i<r.length;i++)n=r[i].split("="),typeof t[n[0]]=="undefined"?t[n[0]]=n[1]:typeof t[n[0]]=="string"?(u=[t[n[0]],n[1]],t[n[0]]=u):t[n[0]].push(n[1]);return t}();App.QueryString.extract=function(){for(var t,i={},r=window.location.search.split("&"),n=0;n<r.length;n++)t=r[n].replace("?","").split("="),i[t[0]]=t[1];return i}